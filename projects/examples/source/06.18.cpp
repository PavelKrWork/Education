////////////////////////////////////////////////////////////////////////////////

#include <functional>
#include <vector>

////////////////////////////////////////////////////////////////////////////////

#include <boost/dll.hpp>

////////////////////////////////////////////////////////////////////////////////

#include "06.18.hpp"

////////////////////////////////////////////////////////////////////////////////

int main()
{
	library::test();

//  ----------------------------------------------------------------------------

	std::vector < std::function < void() > > functions;

//  ----------------------------------------------------------------------------

	auto path = "libshared.so";

//  ----------------------------------------------------------------------------

	functions.push_back(boost::dll::import_symbol < void() > (path, "test_v1"));

	functions.push_back(boost::dll::import_symbol < void() > (path, "test_v2"));

//  ----------------------------------------------------------------------------
		
	for (auto const & function : functions)
	{
		function();
	}

//  ----------------------------------------------------------------------------

	boost::dll::import_alias < void() > (path, "test_v3")();
}

////////////////////////////////////////////////////////////////////////////////